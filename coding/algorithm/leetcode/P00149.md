# ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹

## â“é¢˜ç›®æè¿°
ç»™ä½ ä¸€ä¸ªæ•°ç»„ points ï¼Œå…¶ä¸­ points[i] = [xi, yi] è¡¨ç¤º X-Y å¹³é¢ä¸Šçš„ä¸€ä¸ªç‚¹ã€‚æ±‚æœ€å¤šæœ‰å¤šå°‘ä¸ªç‚¹åœ¨åŒä¸€æ¡ç›´çº¿ä¸Šã€‚


## ğŸ·ï¸ç¤ºä¾‹
<!-- tabs:start -->
#### **ç¤ºä¾‹1**
```
è¾“å…¥ï¼špoints = [[1,1],[2,2],[3,3]]
è¾“å‡ºï¼š3
```
#### **ç¤ºä¾‹2**
```
è¾“å…¥ï¼špoints = [[1,1],[3,2],[5,3],[4,1],[2,3],[1,4]]
è¾“å‡ºï¼š4
```
<!-- tabs:end -->
```
1 <= points.length <= 300
points[i].length == 2
-104 <= xi, yi <= 104
points ä¸­çš„æ‰€æœ‰ç‚¹ äº’ä¸ç›¸åŒ
```
## ğŸ‘€è§£ç­”

<!-- tabs:start -->

#### **å®šä¹‰Slopeç±»**
```java
public class Solution {
    /**
     * éå†æ¯ä¸€ä¸ªç‚¹ï¼Œè®¡ç®—ä»–å’Œå…¶ä»–ç‚¹è®¡ç®—æ–œç‡ç›¸åŒçš„æœ€å¤§æ•°
     */
    public int maxPoints(int[][] points) {
        int n = points.length;
        if (n <= 2) { return n;}
        int max = 0;
        for (int i = 0; i < n; i++) {
            int[] p1 = points[i];
            Map<Slope, Integer> map = new HashMap<>();
            for (int j = i + 1; j < n; j++) {
                int[] p2 = points[j];
                Slope slope = new Slope(p1, p2);
                map.put(slope, map.getOrDefault(slope, 0) + 1);
            }
            for (Integer count : map.values()) {
                max = Math.max(max, count + 1);
                if (max == n-i) { return max; }
            }
        }
        return max;
    }

    /**
     * è®¡ç®—æ–œç‡ï¼š å­˜å‚¨æ–œç‡
     * ä¸ºäº†é¿å…kå‡ºç°å°æ•°ï¼Œ å¹¶ä¸å»å®é™…è®¡ç®—ï¼Œè€Œæ˜¯å­˜ä¸¤ä¸ªæ•° k[2] , real_k = k[1]/k[2]
     */
    static  class Slope {
        int[] k = new int[2];

        /** å¿…é¡»é‡å†™hashCodeå‡½æ•° */
        @Override
        public int hashCode() {
            return (k[0] << 16) | k[1];
        }

        @Override
        public boolean equals(Object object) {
            if (! (object instanceof  Slope)) { return super.equals(object);}
            Slope slope = (Slope) object;
            return slope.k[0] == k[0] && slope.k[1]==k[1];
        }

        public Slope(int[] p1, int[] p2) {
            int deltaY = p1[1] - p2[1];
            int deltaX = p1[0] - p2[0];
            if (deltaX == 0) { deltaY = 1; }
            if (deltaY == 0) { deltaX = 1; }
            if (deltaX < 0) {
                deltaX = -deltaX;
                deltaY  = -deltaY;
            }
            int gcd = gcd(deltaX, deltaY);
            deltaX /= gcd;
            deltaY /= gcd;
            k[0] = deltaX;
            k[1] = deltaY;
        }

        /** è®¡ç®—æœ€å¤§å…¬çº¦æ•° */
        private int gcd(int a, int b) {
            return b != 0 ? gcd(b, a % b) : a;
        }
    }
}
```
#### **TODO: å›¾å½¢å­¦ä¸Šæœ‰ä¸€ç§æ–¹æ³•**
```java
```
<!-- tabs:end -->
