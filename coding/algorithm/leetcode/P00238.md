# é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯

## â“é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â numsï¼Œè¿”å› æ•°ç»„Â answerÂ ï¼Œå…¶ä¸­Â answer[i]Â ç­‰äºÂ numsÂ ä¸­é™¤Â nums[i]Â ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯Â ã€‚

é¢˜ç›®æ•°æ® ä¿è¯ æ•°ç»„Â numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨Â  32 ä½ æ•´æ•°èŒƒå›´å†…ã€‚

è¯·ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨Â O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚


## ğŸ·ï¸ç¤ºä¾‹
<!-- tabs:start -->
#### **ç¤ºä¾‹1**
```
è¾“å…¥: nums = [1,2,3,4]
è¾“å‡º: [24,12,8,6]
```
#### **ç¤ºä¾‹2**
```
è¾“å…¥: nums = [-1,1,0,-3,3]
è¾“å‡º: [0,0,9,0,0]
```
<!-- tabs:end -->
```
2 <= nums.length <= 105
-30 <= nums[i] <= 30
ä¿è¯ æ•°ç»„Â numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨Â  32 ä½ æ•´æ•°èŒƒå›´å†…
Â 
è¿›é˜¶ï¼šä½ å¯ä»¥åœ¨ O(1) çš„é¢å¤–ç©ºé—´å¤æ‚åº¦å†…å®Œæˆè¿™ä¸ªé¢˜ç›®å—ï¼Ÿï¼ˆ å‡ºäºå¯¹ç©ºé—´å¤æ‚åº¦åˆ†æçš„ç›®çš„ï¼Œè¾“å‡ºæ•°ç»„ä¸è¢«è§†ä¸ºé¢å¤–ç©ºé—´
```
## ğŸ‘€è§£ç­”

<!-- tabs:start -->

#### **åŒå‘éå†**
```java
public class Solution {
    /**
     * åŒå‘éå†
     */
    public int[] productExceptSelf(int[] nums) {
        int n = nums.length;
        int[] res = new int[n];
        int[] left = new int[n];
        int[] right = new int[n];
        left[0] = 1;
        for (int i = 1; i < n; i++) {
            left[i] = left[i-1] * nums[i-1];
        }
        right[n-1] = 1;
        for (int i = n-2; i >=0; i--) {
            right[i] = right[i+1] * nums[i+1];
        }
        for (int i = 0; i < n; i++) {
            res[i] = left[i] * right[i];
        }
        return res;
    }
}

```
#### **ä¼ª0(1)ç©ºé—´å®Œæˆ**
```java
public class Solution {
    /**
     * åŒå‘éå†
     *  ä½¿ç”¨0(1)ç©ºé—´å®Œæˆï¼Œè¾“å‡ºç©ºé—´ä¸ç®—
     * Bug: ä¼šä¿®æ”¹numsçš„å€¼
     */
    public int[] productExceptSelf(int[] nums) {
        int n = nums.length;
        // res[i] as left[i], nums[i] as right[i+1];
        int[] res = new int[n];
        res[0] = 1;
        for (int i = 1; i < n; i++) {
            res[i] = res[i-1] * nums[i-1];
        }
        for (int i = n-2; i >=0; i--) {
            nums[i] = nums[i+1] * nums[i];
        }
        for (int i = 0; i < n-1; i++) {
            res[i] = res[i] * nums[i+1];
        }
        return res;
    }
}

```
#### **0(1)ç©ºé—´**
```java
public class Solution {
    /**
     * åŒå‘éå† <br>
     * ä½¿ç”¨0(1)ç©ºé—´å®Œæˆï¼Œè¾“å‡ºç©ºé—´ä¸ç®— <br>
     */
    public int[] productExceptSelf(int[] nums) {
        int n = nums.length;
        int[] res = new int[n];
        res[0] = 1;
        for (int i = 1; i < n; i++) {
            res[i] = res[i-1] * nums[i-1];
        }
        int right = nums[n-1];
        for (int i = n-2; i >=0; i--) {
            res[i] = res[i] * right;
            right *= nums[i];
        }
        return res;
    }
}

```
<!-- tabs:end -->
